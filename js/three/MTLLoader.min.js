THREE.MTLLoader=function(a){this.manager=(a!==undefined)?a:THREE.DefaultLoadingManager};Object.assign(THREE.MTLLoader.prototype,THREE.EventDispatcher.prototype,{load:function(b,d,f,e){var c=this;var a=new THREE.FileLoader(this.manager);a.setPath(this.path);a.load(b,function(g){d(c.parse(g))},f,e)},setPath:function(a){this.path=a},setTexturePath:function(a){this.texturePath=a},setBaseUrl:function(a){console.warn("THREE.MTLLoader: .setBaseUrl() is deprecated. Use .setTexturePath( path ) for texture path or .setPath( path ) for general base path instead.");this.setTexturePath(a)},setCrossOrigin:function(a){this.crossOrigin=a},setMaterialOptions:function(a){this.materialOptions=a},parse:function(j){var l=j.split("\n");var b={};var c=/\s+/;var a={};for(var d=0;d<l.length;d++){var m=l[d];m=m.trim();if(m.length===0||m.charAt(0)==="#"){continue}var f=m.indexOf(" ");var h=(f>=0)?m.substring(0,f):m;h=h.toLowerCase();var g=(f>=0)?m.substring(f+1):"";g=g.trim();if(h==="newmtl"){b={name:g};a[g]=b}else{if(b){if(h==="ka"||h==="kd"||h==="ks"){var k=g.split(c,3);b[h]=[parseFloat(k[0]),parseFloat(k[1]),parseFloat(k[2])]}else{b[h]=g}}}}var e=new THREE.MTLLoader.MaterialCreator(this.texturePath||this.path,this.materialOptions);e.setCrossOrigin(this.crossOrigin);e.setManager(this.manager);e.setMaterials(a);return e}});THREE.MTLLoader.MaterialCreator=function(b,a){this.baseUrl=b||"";this.options=a;this.materialsInfo={};this.materials={};this.materialsArray=[];this.nameLookup={};this.side=(this.options&&this.options.side)?this.options.side:THREE.FrontSide;this.wrap=(this.options&&this.options.wrap)?this.options.wrap:THREE.RepeatWrapping};THREE.MTLLoader.MaterialCreator.prototype={constructor:THREE.MTLLoader.MaterialCreator,setCrossOrigin:function(a){this.crossOrigin=a},setManager:function(a){this.manager=a},setMaterials:function(a){this.materialsInfo=this.convert(a);this.materials={};this.materialsArray=[];this.nameLookup={}},convert:function(a){if(!this.options){return a}var h={};for(var c in a){var i=a[c];var g={};h[c]=g;for(var b in i){var d=true;var f=i[b];var e=b.toLowerCase();switch(e){case"kd":case"ka":case"ks":if(this.options&&this.options.normalizeRGB){f=[f[0]/255,f[1]/255,f[2]/255]}if(this.options&&this.options.ignoreZeroRGBs){if(f[0]===0&&f[1]===0&&f[2]===0){d=false}}break;default:break}if(d){g[e]=f}}}return h},preload:function(){for(var a in this.materialsInfo){this.create(a)}},getIndex:function(a){return this.nameLookup[a]},getAsArray:function(){var a=0;for(var b in this.materialsInfo){this.materialsArray[a]=this.create(b);this.nameLookup[b]=a;a++}return this.materialsArray},create:function(a){if(this.materials[a]===undefined){this.createMaterial_(a)}return this.materials[a]},createMaterial_:function(h){var d=this;var b=this.materialsInfo[h];var f={name:h,side:this.side};var a=function(j,i){if(typeof i!=="string"||i===""){return""}if(/^https?:\/\//i.test(i)){return i}return j+i};function c(j,i){if(f[j]){return}var l=d.getTextureParams(i,f);var k=d.loadTexture(a(d.baseUrl,l.url));k.repeat.copy(l.scale);k.offset.copy(l.offset);k.wrapS=d.wrap;k.wrapT=d.wrap;f[j]=k}for(var g in b){var e=b[g];if(e===""){continue}switch(g.toLowerCase()){case"kd":f.color=new THREE.Color().fromArray(e);break;case"ks":f.specular=new THREE.Color().fromArray(e);break;case"map_kd":c("map",e);break;case"map_ks":c("specularMap",e);break;case"map_bump":case"bump":c("bumpMap",e);break;case"ns":f.shininess=parseFloat(e);break;case"d":if(e<1){f.opacity=e;f.transparent=true}break;case"Tr":if(e>0){f.opacity=1-e;f.transparent=true}break;default:break}}this.materials[h]=new THREE.MeshPhongMaterial(f);return this.materials[h]},getTextureParams:function(c,b){var e={scale:new THREE.Vector2(1,1),offset:new THREE.Vector2(0,0)};var a=c.split(/\s+/);var d;d=a.indexOf("-bm");if(d>=0){b.bumpScale=parseFloat(a[d+1]);a.splice(d,2)}d=a.indexOf("-s");if(d>=0){e.scale.set(parseFloat(a[d+1]),parseFloat(a[d+2]));a.splice(d,4)}d=a.indexOf("-o");if(d>=0){e.offset.set(parseFloat(a[d+1]),parseFloat(a[d+2]));a.splice(d,4)}e.url=a.join(" ").trim();return e},loadTexture:function(c,b,e,h,g){var f;var a=THREE.Loader.Handlers.get(c);var d=(this.manager!==undefined)?this.manager:THREE.DefaultLoadingManager;if(a===null){a=new THREE.TextureLoader(d)}if(a.setCrossOrigin){a.setCrossOrigin(this.crossOrigin)}f=a.load(c,e,h,g);if(b!==undefined){f.mapping=b}return f}};